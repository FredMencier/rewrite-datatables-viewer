<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Usage Reporting</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700&display=swap" rel="stylesheet">
</head>
<body class="app-shell">
    <div id="app" class="elastic-shell">
        <!-- Header -->
        <header class="header elastic-header">
            <div class="header-content elastic-header-content">
                <div class="header-title-group">
                    <h1 class="app-title">
                        Recipe Usage Discover
                        <span class="app-version">v<%= version %></span>
                    </h1>
                </div>
                <div class="header-controls elastic-header-controls">
                    <button id="refresh-data" class="btn btn-secondary icon-btn" aria-label="Actualiser les donn√©es">
                        <span class="material-symbols-outlined">refresh</span>
                    </button>
                    <button id="export-data" class="btn btn-primary icon-btn" aria-label="Exporter les donn√©es">
                        <span class="material-symbols-outlined">ios_share</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Loading Indicator -->
        <div id="loading" class="loading-overlay">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Chargement des donn√©es...</p>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Navigation Tabs -->
            <nav class="nav-tabs elastic-tabs">
                <button class="tab-button active" data-tab="usage">
                    <span>üßæ</span> Reporting d'usage
                </button>
                <button class="tab-button" data-tab="overview">
                    <span>üìä</span> Vue d'ensemble
                </button>
                <button class="tab-button" data-tab="performance">
                    <span>‚ö°</span> Performance
                </button>
                <button class="tab-button" data-tab="files">
                    <span>üìÅ</span> Fichiers
                </button>
                <button class="tab-button" data-tab="recipes">
                    <span>üç≥</span> Recettes
                </button>
            </nav>

            <!-- Tab Content Panels -->
            <div class="tab-content">
                <!-- Usage Report Tab -->
                <div id="usage-tab" class="tab-panel active">
                    <!-- Contenu inject√© dynamiquement par App.ts -->
                </div>

                <!-- Overview Tab -->
                <div id="overview-tab" class="tab-panel">
                    <div class="dashboard-grid">
                        <!-- KPI Cards -->
                        <section class="kpi-cards">
                            <div class="kpi-card">
                                <div class="kpi-icon">‚è±Ô∏è</div>
                                <div class="kpi-content">
                                    <div class="kpi-value" id="total-time-saved">-</div>
                                    <div class="kpi-label">Temps Total √âconomis√©</div>
                                </div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-icon">üéØ</div>
                                <div class="kpi-content">
                                    <div class="kpi-value" id="total-files-changed">-</div>
                                    <div class="kpi-label">Fichiers Modifi√©s</div>
                                </div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-icon">üîß</div>
                                <div class="kpi-content">
                                    <div class="kpi-value" id="recipes-count">-</div>
                                    <div class="kpi-label">Recettes Actives</div>
                                </div>
                            </div>
                        </section>

                        <!-- Main Charts -->
                        <section class="chart-container full-width">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3>R√©partition des √âconomies par Recette</h3>
                                    <div class="chart-controls">
                                        <select id="savings-chart-type">
                                            <option value="pie">Camembert</option>
                                            <option value="bar">Barres</option>
                                            <option value="treemap">TreeMap</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="chart-body">
                                    <div id="savings-by-recipe-chart"></div>
                                </div>
                            </div>
                        </section>

                    </div>
                </div>

                <!-- Performance Tab -->
                <div id="performance-tab" class="tab-panel">
                    <div class="dashboard-grid">
                        <section class="chart-container full-width">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3>Temps d'Ex√©cution par Recette</h3>
                                    <div class="chart-controls">
                                        <button class="btn btn-sm active" data-time-unit="ms">Millisecondes</button>
                                        <button class="btn btn-sm" data-time-unit="s">Secondes</button>
                                    </div>
                                </div>
                                <div class="chart-body">
                                    <div id="execution-time-chart"></div>
                                </div>
                            </div>
                        </section>

                        <section class="chart-container full-width">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3>Distribution Scan vs Edit</h3>
                                </div>
                                <div class="chart-body">
                                    <div id="scan-vs-edit-chart"></div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>


                <!-- Files Tab -->
                <div id="files-tab" class="tab-panel">
                    <div class="dashboard-grid">
                        <section class="chart-container full-width">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3>Flux de Modifications des Fichiers</h3>
                                </div>
                                <div class="chart-body">
                                    <div id="file-changes-chart"></div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>

                <!-- Recipes Tab -->
                <div id="recipes-tab" class="tab-panel">
                    <div class="dashboard-grid">
                        <section class="chart-container full-width">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3>Hi√©rarchie des Recettes</h3>
                                </div>
                                <div class="chart-body">
                                    <div id="recipe-hierarchy-chart"></div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </main>

        <!-- Tooltip Container -->
        <div id="tooltip" class="tooltip" style="opacity: 0;">
            <div class="tooltip-content"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="dist/bundle.js"></script>
</body>
</html>
